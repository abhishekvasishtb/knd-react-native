## Введение:
Мобильное приложение на примерно 3 экрана в тему КНД.
В лучших традициях карго культа код был разбросан по файлам и папкам, читаеым и адекватным он от этого не стал. Еще будут обновления, но не факт что в плане наглядности станет лучше.

## Как посмотреть:
1) Скачать [apk](), установить. 
2) Посмотреть на [Expo](https://expo.io/@dtsvetkov/knd-react-native). 
3) Можно поторгать руками и посмотреть вживую на [Expo Snack](https://snack.expo.io/@dtsvetkov/knd-react-native-snack)

Временами может не работать или работать криво, но теоретически там должен быть актуальный код.

P.S.: вариант с expo немного outdated, отсутствуют новые фичи (например работа в оффлайне).
### запустить локально

В директории запустить

```
npm install
```

и затем

```
react-native run-android
# или
npm start
```
(для react-native может потребоваться `npm install -g create-react-native-app`)

Для работы с приложением опять потребуется expo или эмулятор android из Android SDK.

## UX/workflow/etc:
-Ввести соответствующий логин:пароль инспектора, нажать кнопку "Войти"

-Нажать на черную стрелочку, перейти в форму с галочками

При нажатии на саму строку откроется дополнительная информация

-Пощелкать галочки, нажать кнопку отправить

-Перейти в боковом меню к выполненным проверкам


## Что работает:
- Некое подобие авторизации
- Вывод списка проверок (запланированных и выполненных)
- Заполнение формы, сохрание проставленных значений в кеше, отправка запланированных проверок в выполненные
- Возможность разлогиниться
- Подобие оффлайн режима при отсутствии подключения к инернету

## Особенности:
-Для наглядности и чтобы можно было сразу запустить и посмотреть, в приложение были засунуты какие-то куски данных, без полноценых подключений к базам (только собственный AsyncStorage). Это не баг а фича, поэтому большя часть кривых моментов и урезанного UI связана только с этим.
Из известного:
-в выполненных проверках может не быть дат, адреса, по тачу не работает вывод дополнительной информации.
- при каждом новом логине данные будут сброшены до дефолтного состояния (7 проверок, 0 выполненных)
- не работают сортировки (для наглядности копки для них поставлены)
Из предыдущего пункта. Это было сделано временно для удобства, при этом почти все готово (в плане кода) для загрузки данных с бэка, в нужный момент они легко интегрируются и исчезает часть проблем. 
Почти вся логика сделана с идеей полностью повторять (копировать) логику сайта (включая цвета при переключении свичей и кнопка перехода в форму в строке слева). Часть вещей очевидно нужно поменять (). 
- на данный момент не использовано ничего вне фреймворка
- в веб версии на странице логина в полях для ввода логина и пароля имеются иконки (prefix). Реализовать такое здесь без лишних телодвижений вроде можно только на андроиде. Можно сделать и мультиплатформенно, но это займет время. 

## Особенности работы в оффлайн режиме:
Текущая реализация самая топорная и все её элементы написаны руками просто чтобы потренироваться и не усложнять код. 
При этом были опробованы разные варианты как сохранить приложение рабочим при отсутствии сети.

#### Redux (redux-persist)
Скорее всего нормальное полноценное приложение нужно будет сразу писать с использованием redux. Это такая удачная реализации 
варианта с "глобальным" для приложения state (или вроде того), к использованию обязательна. 
Сторонняя библиотека [redux-persist](https://github.com/rt2zz/redux-persist#basic-usage) помимо того что очень популярная, 
она делает буквально то что нужно данному приложению и то чего не хватает redux'у - сохраняет при необходимости 
данные из reducer'a. При этом более шести тысяч звезд на гитхабе, больше чем у других вариантов, а это самое главное.

#### Realm database
Особенность предыдущего варианта (да и собственно почти всех других, в том числе текущего топорно-ручного) в том что 
данные сохраняются всегда в виде пар ключ:значение и значение, которое было массивом или словарем, перед сохранением
проходит этап stringify. Само по себе не страшно, но принципиально другой подход это полноценная база данных,
например Realm. Возможность создавать свои объекты и схемы с полями и значениями, мерждить и обновлять таблицы.
Плюс авторы обещают скорость работы в 10 раз больше чем прямая работа с локальным стором.

Хотя на гитхабе у нее звездочек меньше (всего две тысячи) и скорее всего overkill для данной задачи (нужно просто 
сохранить данные, а потом достать, перезаписывать можно всем пучком).

Текущая реализация - по сути redux-persist сделанный явно руками.


## Что сейчас криво/не работает:
- на iOS видимо есть проблемы с отображением части информации, поля уезжают, цвета заголовков в хэдере явно не подходят по стилю.
- на iOS отсутствуют всплывающие плашки уведомлений (например при введении неверной пары логин-пароль или при отправке отчета на андроиде будет уведомление). Связано с тем что нормальное естественное решение для этого есть только на Android (ToastAndroid). Возможно будет исправлено/переделано.
- на странице с логином могут быть мелкие проблемы с дизайном (дергающийся блок при преключении клавиатуры, ширина границ полей ввода может вести себя неадекватно). Это вроде тоже скоро будет исправлено. 
- отсутствуют анимации там где они по ощущениям должны быть (например при разлогинивании)
- небольшой кошмар с цветами всего, начиная от хэдеров заканчивая переключателями.
- возможны проблемы при работе с приложением в реальном мире (кривое название после установки, отсутствие иконки)




## Additiional
Насколько это вообще нормально и адекватно? 
Что нужно переделать/поменять?
Например:
Вместо стрелочек добавить кнопки
Вместо выезжающей панели слева поставить более трендовый футер.
и т.д.